<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>HRMS Scanner</title>
</head>
<body style="background: #020617; color: white; display: flex; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif; margin: 0;">
    <div style="text-align: center; padding: 20px;">
        <div style="font-size: 40px; margin-bottom: 10px;">ðŸ“¸</div>
        <h3 style="margin: 0; font-size: 1.5rem;">HRMS Scanner</h3>
        <p style="color: #94a3b8; font-size: 0.9rem;">Initializing Camera...</p>
    </div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Trigger QR Scanner immediately on open
        tg.showScanQrPopup({
            text: "Align the Station QR Code within the frame"
        }, function(scannedData) {
            if(scannedData) {
                tg.sendData(scannedData); // Sends data back to bot
                tg.closeScanQrPopup();
                tg.close(); // Closes the WebApp window
            }
            return true;
        });
    </script>
</body>
</html>